# AFusion based on TVM

## Profile

cost model。用来加速融合计划的评估。

## Pre-Planning

预规划阶段，包含1.融合模式的生成，2.融合计划的选取
融合模式的生成：
- 导入指定融合模式
- 统一融合空间：对计算图进行依赖关系分析，将自动融合规则下降到指定融合模式
- 融合空间优化，包括融合模式初筛，融合粒度

融合计划的选取：
- 融合模式评估（时延、内存、功耗等参数）
- AOT外部库选取
- 融合计划寻优（DP）

## Fine-Tuning

调优阶段，根据运行时行为对融合计划进行调优。

尽可能多的融合block到缓存，以最大化利用缓存性能，提高数据局部性。